# --> ThePWA <--
<h1>PWA -- Stundenprotokoll</h1>

<h3> Inhalt </h3>
<ul style="list-stlye-type:none">
<li><a href="#kapitell">1. Einleitung</a></h2></li>
<li><a href="#kapitel2">2. Stundenprotokoll</a></h2></li>
<li><a href="#kapitel3">3. Materialien</a></h2></li>
<li><a href="#kapitel4">4. Quellen</a></h2></li>
<br>
<h2 id="kapitell">1. Einleitung</h2>
<p>//////------NEUE EINLEITUNG NOTWENDIG------//////<br></p>
<b>contributors:<br>
@Obeliks003<br>
@TheMoonlandingV2<br></b>

<br><p>Unsere <a href="Projektseite PWA.md">Projektseite</a> enthält Erläuterungen zu unserer PWA und zusätzlich eine abschließende Bewertung unseres Projektes.<br>
<br>Hier gelangt man zu unserem <a href="README.md">README.md</a> zu einer besseren Übersicht.<br><br>
Auf unserer eigenen <a href="https://henrik.stormarnschueler.de/">Website</a> kann die PWA angesehen und heruntergeladen werden.<br></p>

<h2 id="kapitel2">2. Stundenprotokoll</a></h2></li>

<details id="Link"><summary>Liste aller protokollierten Stunden mit zusätzlichem Link</summary>
  <li><a href="#Stunde1">Dienstag 14.12.2021</a></li>
  <li><a href="#Stunde2">Mittwoch 15.12.2021</a></li>
  <li><a href="#Stunde3">Dienstag 21.12.2021</a></li>
  <li><a href="#Stunde4">Dienstag 11.01.2022</a></li>
  <li><a href="#Stunde5">Mittwoch 12.01.2022</a></li>
  <li><a href="#Stunde6">Dienstag 18.01.2022</a></li>
  <li><a href="#Stunde7">Mittwoch 19.01.2022</a></li>
  <li><a href="#Stunde8">Dienstag 07.09.2022</a></li>
  <li><a href="#Stunde9">Mittwoch 26.01.2022</a></li>
  <li><a href="#Stunde10">Dienstag 01.02.2022</a></li>
  <li><a href="#Stunde11">Mittwoch 02.02.2022</a></li>
  <li><a href="#Stunde12">Dienstag 08.02.2020</a></li>
  <li><a href="#Stunde13">Mittwoch 09.02.2022</a></li>
  <li><a href="#Stunde14">Dienstag 15.02.2022</a></li>
  <li><a href="#Stunde15">Mittwoch 16.02.2022</a></li>
  <li><a href="#Stunde16">Dienstag 22.02.2022</a></li>
  <li><a href="#Stunde17">Mittwoch 23.02.2022</a></li>
  <li><a href="#Stunde18">Sonntag 03.10.2022</a></li>
  <li><a href="#Stunde19">Samstag 09.10.2022</a></li>
  <li><a href="#Stunde20">Sonntag 10.10.2022</a></li>
  <li><a href="#Stunde21">Montag 11.10.2022</a></li>
  <li><a href="#Stunde22">Dienstag 12.10.2022</a></li>
  <li><a href="#Stunde23">Mittwoch 13.10.2022</a></li>
  <li><a href="#Stunde24">Donnerstag 14.10.2022</a></li>
  <li><a href="#Stunde25">Freitag 15.10.2022</a></li>
  <li><a href="#Stunde26">Samstag 16.10.2022</a></li>
  <li><a href="#Stunde27">Sonntag 17.10.2022</a></li>
  <li><a href="#Stunde28">Dienstag 19.10.2022</a></li>
  <li><a href="#Stunde29">Mittwoch 20.10.2022</a></li>
  <li><a href="#Stunde30">Dienstag 26.10.2022</a></li>
  <li><a href="#Stunde31">Mittwoch 27.10.2022</a></li>
  <li><a href="#Stunde32">Dienstag 02.11.2022</a></li>
  <li><a href="#Stunde33">Mittwoch 03.11.2022</a></li>
  <li><a href="#Stunde34">Mittwoch 10.11.2022</a></li>
  <li><a href="#Stunde35">Dienstag 16.11.2022</a></li>
  <li><a href="#Stunde36">Mittwoch 17.11.2022</a></li>
  <li><a href="#Stunde37">Donnerstag 18.11.2022</a></li>
  <li><a href="#Stunde38">Dienstag 23.11.2022</a></li>
  <li><a href="#Stunde39">Mittwoch 24.11.2022</a></li>
  <li><a href="#Stunde40">Freitag 26.11.2022</a></li>
  <li><a href="#Stunde41">Dienstag 30.11.2022</a></li>
  <li><a href="#Stunde42">Mittwoch 01.12.2022</a></li>
  <li><a href="#Stunde43">Freiag 03.12.2022</a></li>
  <li><a href="#Stunde44">Samstag 04.12.2022</a></li>
</details>

<p id="Stunde1"><b>Dienstag 14.12.2021</b><br>
  Heute haben wir erstmals damit begonnen, eine Idee für unser zweites Projekt zu entwickeln. Dabei zeigte sich, dass wir nicht die gleichen Gruppen wie beim ersten Projekt haben werden. Gernot hat sich entschieden, einen Roboter zu bauen, worauf Thorben und Henrik aber nicht so viel Lust hatten, weil sie mit einer anderen Software arbeiten wollten. WEITERE IDEEN im Word-Dok.<br></p>
  
<p id="Stunde2"><b>Mittwoch 15.12.2021</b><br>
  Unsere Ideen konzentrierten sich bereits um das Thema PWA also Progressive-Web-App. Wir haben dafür weitergehende Recherchen betrieben um die Umsetzbarkeit zu prüfen. Interessant fanden wir hierbei die Information, dass eine PWA betreibssystemübergreifend opperieren kann und das Gefühl einer nativen App simulieren kann. So kann eine PWA auf Sensoren der Smartphones zugreifen.</p>
  
<p id="Stunde3"><b>Dienstag 21.12.2021</b><br>
  Für unser Projekt ist einige Software nötig. Wir haben dafür beide die Programme Visual Studio Code für die Programmierumgebung und XAMPP heruntergeladen, um für Testzwecke einen lokalen Server zu erstellen. Ein lokaler Server ist für unsere Testzwecke notwendig, damit wir die App nicht im Betrieb einschränken, bzw keine fatalen Fehler in die offen zugängliche App einbauen und Änderungen erst lokal ausprobieren können. Wir haben uns heute mit den Programmen auseinandergesetzt und heute schon einen kleinen Timer von 5 Minuten programmiert. Der Timer, der mit JavaScript entwickelt wurde, arbeitet noch sehr einfach, er wird über einen Button gestartet und ist noch ausbaufähig. Dazu passend haben wir versucht, unsere PWA einzurichten. Dafür benötigen wir ein Webmanifest und einen Service-Worker. Beides haben wir experimentell entwickelt.</p>
  
<details><summary>Screenshots vom 21.12.2021</summary>
  
![Timer](https://user-images.githubusercontent.com/88386049/146931344-9e98d939-a15f-4ce9-9bf0-94868d03a03b.JPG)
![timer1](https://user-images.githubusercontent.com/88386049/146932904-16bd600f-5c54-4e30-a593-3594f02f3df5.JPG)
![XAMPP](https://user-images.githubusercontent.com/88386049/146932912-a01627c9-731c-44c0-ad66-f10ade826cbc.JPG)
  
<p>Mit dem oben abgebildeten Schaltpanel für die Anwendung XAMPP kann man einen lokalen Server starten. In unserem Beispiel nutzen wir das Betriebssystem Apache für unseren lokalen Server. Mit https://localhost/ThePWA/ kann man unsere PWA aufrufen.</p>
  

![URL](https://user-images.githubusercontent.com/88386049/146933036-c6851ac0-566e-4637-b127-fd1a2bac5f78.JPG)


</details>

<p id="Stunde4"><b>Dienstag 11.01.2022</b><br></p>

  In der ersten Stunde nach den Ferien haben wir unseren gemeinsamen Wissenstand abgeglichen. Noch in den Ferien haben wir uns weiter mit der Test-PWA auseinandergesetzt und versucht diese zumindest auf einem Desktop-PC zu installieren. Als dies nicht gelang, stand ein Problem mit dem Code im Raume oder ein Problem mit dem Browser. Nach einiger Recherche war das Problem gefunden: Der Browser Firefox kann im Moment nicht mit PWAs umgehen. Da Firefox nicht mehr in Frage kam, sind wir auf den Browser Chrome und Edge umgestiegen. Vor Allem bei Edge ließ sich unsere PWA auf einem Desktop-PC installieren. Anschließend haben wir die Test-PWA, die am <a href="#Stunde3">21.12.2021</a> noch zu Testzwecken auf einem lokalen Server getestet wurde auf unseren Server hochgeladen. Dies war notwendig, um herauszufinden, ob die App auch auf Mobilgeräten tatsächlich installierbar ist. Wie erhofft hat dies funktioniert und es war uns möglich die PWA auf einem IOS und Andorid Smartphone zu installieren. Leider stießen wir hier auf ein Problem: die PWA funktioniert mit dem aktuellen ```Service-Worker``` nur online, das heißt, dass die Möglichkeit die App offline zu benutzen, noch nicht möglich ist. Wir haben daher den Rest der Stunde damit verbracht, zu recherchieren, wie dies mit einem ```Service-Worker``` möglich ist.
  
<details><summary>Screenshots vom 11.01.2022</summary>
  
  
  ![Screenshot_20220112-161149_Samsung Experience Home](https://user-images.githubusercontent.com/88386049/149168236-37d845f0-4944-48bc-b93b-0307593b93ae.jpg)
  <p>App auf dem Homebildschirm sichtbar, noch kein Logo implementiert.</p>
  
  ![Screenshot_20220112-161247_Samsung Internet](https://user-images.githubusercontent.com/88386049/149168244-4637442f-07d2-41e7-b1fa-7aabd0990d55.jpg)
  <p>Die geöffnete App zeigt kein URL an und die Statusleiste des Smartphones ist in der Hintergrundfarbe der App sichtbar.</p>
  
  ![Screenshot_20220125-152335_Samsung Internet](https://user-images.githubusercontent.com/88386049/151205493-b8b2d880-ecac-440d-8e27-65476c1a9ed1.jpg)
  <p>Unter Android kommt beim Besuch der Website diese Protokollfenster, dass zum Herunterladen der PWA einlädt.</p>

</details>
  
<p id="Stunde5"><b>Mittwoch 12.01.2022</b><br>
  Heute haben wir weiter bezüglich des Sevice-Workers und eines Webmanifestes recherchiert. Das Webmanifest brauchen wir z.B., um ein Logo auf dem Homebildschirm einzubinden. Dazu haben wir uns heute ein einfaches Beispielbild mit einem abgebildetem EKG ausgesuch, das wir in der nächsten Stunde in einem Bilder-Ordner speichern und so ein Icon auf dem Homebildschirm anzeigen können. Bei unserer ersten Testversion haben wir im Webmanifest noch keine Bilder für Icons implementiert.</p>

<p id="Stunde6"><b>Dienstag 18.01.2022</b><br>
  Normalerweise soll bei einer PWA im Browser Chrome oder Edge in der URL-Leiste ein Symbol angezeigt werden, unter welchem man die PWA installieren kann. Bisher wurde uns dieses Symbol aber noch nicht angezeigt und wir haben Nachforschungen angestellt, um herauszufinden, woran dies liegt. Die Lösung scheint zu sein, dass wir wie <a href="#Stunde5">hier</a> berichtet, noch keine Icons implementiert haben. Eine PWA braucht aber verschiedene Icons, um die Eigenschaft der Installierbarkeit zu erhalten. Zu diesem Zweck haben wir Icons mit den (Pixel-) Größen <b>57x57px</b>, <b>60x60px</b>, <b>120x120px</b>, <b>192x192px</b> und <b>512x512px</b> mit dem Bild-Bearbeitungsprogramm Affinity Photo kreiert. Die erzeugten Icons werden im Webmanifest wie folgt eingebunden:</p>
  
  
```css
 "icons": [{
      "src": "Bilder/icon512.png",
      "sizes": "512x512",
      "type": "image/png"     
    },
    {
      "src": "Bilder/icon192.png",
      "sizes": "192x192",
      "type": "image/png"     
    },
    {
      "src": "Bilder/icon120.png",
      "sizes": "120x120",
      "type": "image/png"     
    },
    {
      "src": "Bilder/icon60.png",
      "sizes": "60x60",
      "type": "image/png"     
    },
    {
        "src": "Bilder/icon57.png",
        "sizes": "57x57",
        "type": "image/png"     
      }]
```

<p>Bei der Einbindung der Logos hatten wir einige Probleme, da die Logos zuerst nicht gefunden werden konnten, was bedeutete, dass unsere Website zu diesem zeitpunkt nicht installierbar war. Der Grund lag anscheinend in der falschen Benennung einens Ordners, den wir "Icons" genannt hatten. Nachdem wir den Ordner in "Bilder" benannt haben, konnten alle Logos geladen werden und unsere PWA war installierbar. Anschließend haben wir den Service-Worker überarbeitet, sodass die PWA auch offline nutzbar ist. <b>EVT. KONZEPT DER SW. ERLÄUTERN</b></p>

<details><summary>Screenshots vom 18.01.2021</summary>
  
![Screenshot 2022-01-18 191958](https://user-images.githubusercontent.com/88386049/149996198-a23f42c9-23cc-4871-b27e-7792323fe6e0.jpg)
<p>Hier ist die beispielhafte URL-Leiste im Browser mit dem Hinweis auf die Installierbarkeit zu sehen</p>

![icon512](https://user-images.githubusercontent.com/88386049/150006074-4f5bbd34-08cd-4e8f-a5bd-585be6954d64.png)
<p>Dies ist das ertse testweise Logo in der Größe 512x512px</p>
  
![icon192](https://user-images.githubusercontent.com/88386049/150006323-1f0fce6a-0b90-472d-8ecc-7528a28a8acf.png)
  <p>Größe: 192x192px</p>

![icon120](https://user-images.githubusercontent.com/88386049/150006328-5bc0a714-5435-4bcc-8476-eda6c079d2be.png)
  <p>Größe: 120x120px</p>  
  
![icon60](https://user-images.githubusercontent.com/88386049/150006335-3c27169a-f7c7-477a-9d54-1d9d3a5fff5d.png)
  <p>Größe: 60x60px</p>

![icon57](https://user-images.githubusercontent.com/88386049/150006337-6eae52c5-aa7e-483e-b862-5449bb0481d6.png)
  <p>Größe: 57x57px</p>
  
![icon32](https://user-images.githubusercontent.com/88386049/150006340-f01b7b98-20ef-4d91-9aa2-1dab5f11d4ac.png)
<p>Größe: 32x32px</p>

</details>

<p id="Stunde7"><b>Mittwoch 19.01.2022</b><br></p>

  In der letzten Stunde gab es in der Entwicklungskonsole im Browser noch einen Fehler, der besagte, dass ein "Favicon" noch nicht gefunden werden konnte. Das "Favicon ist ein Icon, das vom Browser in der Tab-Liste verwendet wird. Es hat dabei anders als alle anderen Logos nicht das Dateiformat ```.png```, sondern das Format ```.ico```, was bedeutet, dass es sich um ein Icon handelt. Die Größe des Logos beträgt 32x32px. Wir hatten aber Schwierigkeiten mit der Verwendung des Icons, da wir es wie unsere anderen Logos in dem Ordner Bilder gespeichert hatten. Der Browser liest das Logo aber nur aus, wenn sich das ```Favicon.ico``` im Root-Ordner befindet, also auf der Ebene der HTML- und JavaScript-Dokumente. Seit dem wir das ``Favicon.ico`` auch im Root-Ordner gespeichert haben, wird in der Tab-Liste des Browsers unser Logo angezeigt (siehe Screenshots). Außerdem haben wir dabei Komplikationen mit dem Fetch-Request im Service-Worker, da wir das ``Favicon.ico`` unter einem falschem Pfad gespeichert haben. Dieses Problem führt dazu, dass der Service-Worker nicht weiter ausgeführt wird, was ein fatales Problem darstellt. Dieses Problem werden wir am Wochenende schnellstmöglich beheben.

<details><summary>Screenshots vom 19.01.2022</summary>

![icon32](https://user-images.githubusercontent.com/88386049/150184288-230065f2-ca2f-4875-8772-24561687856c.png)
  <p>Favicon.ico mit der Größe 32x32px</p>

![Screenshot 2022-01-19 182932](https://user-images.githubusercontent.com/88386049/150184295-5f8dc74d-b399-49e5-b42f-bee9029d406e.jpg)
  <p>Unser Logo wird in der Tab-Liste angezeigt.</p>

</details>

<p id="Stunde8"><b>Dienstag 25.01.2022</b><br></p>

  Die heutige Stunde ist zwar ausgefallen, allerdings haben wir stattdessen zuhause an unserem Projekt weitergearbeitet und weitere Erfolge erzielt. Thorben hat versucht die Geschwindigkeitssensoren ``accelerometer`` auf dem Handy zu verwenden, um damit einen Schrittzähler oder eine Geschwindigkeitsanzeige zu programmieren. Wir haben dafür eine Sensor-API entwickelt. Dies funktionierte am Ende auf Android-Handys leider aber nicht unter Apple-IOS, da Apple den Zugriff auf die Sensoren nicht unterstützt. Währenddessen hat sich Henrik weiter mit dem Aussehen in der App beschäftigt. Hierbei wollten wir ein Menü haben, das man von der Seite aufklappen kann und darüber zu unterschiedlichen Bereichen der App gelangt. Im Browser am PC funktioniert das Menü auch durch mit dem Cursor über das Menü "hovern". Ob das auch durch klicken auf dem Touchscreen funktioniert müssen wir im weiteren Verlauf unseres Projekts noch ausprobieren. Gestaltet haben wir das Menü nur mit CSS, um die Ladezeiten der Website/App möglichst gering zu halten. Zusätzlich habe wir noch einige Probleme im Serviceworker behoben und somit keine Schwierigkeiten mehr mit dem Installieren der App. Da der Service-Worker sich die Dateien "cashed" also quasi herunterlädt, wird bei geänderter Datei trotzdem teilweise die alte Datei angezeigt. Um dieses Problem zu umgehen, muss man die Registrierung des Service-Workers aufheben und die Seite neu laden.</p>

<details><summary>Screenshots vom 25.01.2022</summary>
   
![Screenshot_20220125-195507_Samsung Internet](https://user-images.githubusercontent.com/88386049/151206579-04eb11ec-b82f-4a1b-b252-8a321a0f5e15.jpg)
![Screenshot_20220125-195522_Samsung Internet](https://user-images.githubusercontent.com/88386049/151206594-a65ae6f6-956e-4b9b-af5f-ebc5d0d358d7.jpg)
<p>Die Zahlen unter dem Button "Timer starten" sind die aktuellen Ergebnisse des Accelerometers (Beschleunigungssensor). Die Daten werden alle 60 Sekunden generiert. Oben befindet sich das Handy in Ruhelage und auf dem zweiten Bild in Bewegung.</p>
  
  
![Screenshot_20220126-172747_Samsung Internet](https://user-images.githubusercontent.com/88386049/151206611-d93eb722-20bd-48c5-a633-19eb55fe5e61.jpg)
![Screenshot_20220126-172757_Samsung Internet](https://user-images.githubusercontent.com/88386049/151206627-b0dc4354-77a4-482a-8d86-ed770eff03af.jpg)
<p>Das Menü der App in auf- und zugeklappter Ansicht.</p>

  
</details>

<p id="Stunde9"><b>Mittwoch 26.01.2022</b><br></p>


  Wir haben auch heute wieder die Zeit genutzt, um die PWA weiter zu entwickeln. Um in unserer App auch Push-Notifications möglich zu machen, haben wir heute an einer Push-API gearbeitet. Diese kann auch über ein Event und einen Eventlistener eingebaut werden. Testweise soll die App bei jedem Öffnen die Benachrichtigung ``Willkommen zurück!`` senden. Dies hat nach einiger Zeit auch funktioniert (siehe Screenshots) wurde aber auch schnell nervig, weshalb wir die Funktion schnell wieder entfernt haben. Außerdem haben wir heute heute den Feinschliff von dem gestrigen Code-Marathon erledigt. So haben wir die Frequenz der Datenmessung auf 5 Messungen die Sekunde heruntergesetzt. Das soll das Betrachten der Werte vereinfachen, und Schlüsse auf die Deutung der gemessenen Daten erlauben. Dazu haben wir die Daten größer dargestellt und die Hintergrundfarbe verändert. Henrik hat heute weiter versucht, die Menüleiste auf das mobile Format anzupassen. Für diese Problem haben wir bisher noch keine zufriedenstellende Lösung gefunden. Trotzdem haben wir gemerkt, das viele Apps auch ein Menü am unteren Rand des Bildschirms haben. Hier haben wir ein zweites Menü eingefügt, in das aber nur drei bis fünf Elemente für den Schnellzugriff reinsollen.</p>

<details><summary>Screenshots vom 26.01.2022</summary>

![Screenshot_20220125-152437_Samsung Internet](https://user-images.githubusercontent.com/88386049/151771714-d94df686-5910-4b9e-a554-aa5fc1dc2e59.jpg)

<p>Hier ist die Push-Notifikation der App zu sehen. Zu Test-Zwecken wurde die Benachrichtigung "Willkommen zurück!" beim Öffnen der App gesendet.</p>
  
![Screenshot_20220125](https://user-images.githubusercontent.com/88386049/151929753-fd9893ad-8061-4ce3-8fa0-7c6757e0c37e.JPG)
<p>Dies ist die Navigationsleiste, die auf das mobile Format angepasst ist.</p>
  
</details>

<p id="Stunde10"><b>Dienstag 01.02.2022</b><br>
  In der letzten Arbeitsstunde haben wir die Messfrequenz auf 5 Messungen die Sekunde herabgesetzt, um die Bedeutung der angezeigten Messwerte besser deuten zu können. Dies hat mehr oder weniger funktioniert, da sich die Zahlen trotzdem noch schnell änderten. Wir haben aber trotzdem erkannt, welche Daten für welche Achsen des Smartphones stehen. Eine Skizze zu der Achsenanordnung ist unter den Screenshots zu finden. Wir haben aber erkannt, dass die X-Achse wohl ausschlaggebend für die Definition eines Schrittes ist. Dafür haben wir die Beschleunigungsanzeige für die Y- und Z-Achse entfernt und versucht eine Funktion zu schreiben, die uns die maximale Beschleunigung in X-Achsenrichtung und die minimale Beschleunigung in X-Achsenrichtung anzeigt. Dabei haben wir aber zuerst einen Fehler gemacht, weil wir die Funktion nur einmal beim Laden der Website ausführen lassen haben. So schnell wie die Funktion ausgeführt wurde, kann die Sensor-API nicht gestartet werden, weshalb kein Wert für die maximale und minimale Beschleunigung angezeigt werden kann.
Die Funktion musste nur im Script in die ONREADING-Funktion verschoben werden, damit sie funktioniert. Zusätzlich haben wir einen Button hinzugefügt, der die angezeigte Beschleunigung zurücksetzt, damit wir bei jedem Schritt die Werte zurücksetzen können.
Des Weiteren haben wir in dieser Stunde das Menü unserer App weiterentwickelt. Hierbei war bisher zum Öfnnen nur ein drüberhovern mit der Maus möglich und am Smartphone das Öffnen eher schwierig. Um dieses Problem zu umgehen, wollten wir gerne ein Menü, das sich durch klicken mit der Maus bzw. durch tippen mit dem Finger öffnet. Hierfür haben wir eine Lösung mit Hilfe wechselnder Klassender im Stylesheet gefunden, sodass unser Menü uns bisher sehr gut gefällt.</p>


<details><summary>Screenshots vom 01.02.2022</summary>
  
![Screenshot_20220201](https://user-images.githubusercontent.com/88386049/151929151-3d1ee209-f121-4fd8-a764-45b766ce9a07.JPG)
  
</details>

<p id="Stunde11"><b>Mittwoch 02.02.2022</b><br>
  Heute haben wir an unserem Schrittzähler weitergearbeitet. Dabei haben wir uns dazu entschieden bei der Auswertung der Geschwindigkeit alle drei Achsen zu verwenden, da das Smartphone sonst nur in einer bestimmte Ausrichtung Schritte zählen kann. Hierfür addieren wir die Geschwindigkeiten aller drei Achsen und ziehen dann die Beschleunigung der Erdanziehung ab. Leider ist unser Versuch misslungen, da auf dem Feld die Zahl 5 auch bei absoluter Ruhe angezeigt wird, obwohl 0 Beschleunigung angezeigt werden sollte.<br>
Da es aber viele verschiedene Möglichkeiten gibt zu gehen, zum Beispiel unterschiedliches Tempo oder auf der Stelle, es aber auch Bewegungen für das Handy gibt die keine Schritte sind, müssen wir uns für einen fertigen Schrittzähler noch genauere Bedingungen überlegen. Zu den genaueren bedingungen zählt die Geschwindigkeit. Mithilfe der Geolocation-API kann sowohl die Geschwindikeit als auch die Längen- und Breitengrade ausgegeben werden. In dieser Stunde sind wir bisher nur dazu gekommen, die Koordinaten auszugeben (siehe Screenshots). Außerdem haben wir unser Menü noch weiter gestaltet und Kleinigkeiten geändert damit das Menü auf allen Bildschirmen gleich aussieht. Bisher waren hier kleine Verschiebungen zu erkennen.</p>


<details><summary>Screenshots vom 02.02.2022</summary>
  
![menü](https://user-images.githubusercontent.com/88386049/152693472-bf854e4d-7583-486a-9469-b7962b2f76ec.JPG)
  <p>Dies ist das neue Menü, das ausklappbar ist und unten ist die fertige Navigationsleiste. Hier sind zu Testzwecken noch Platzhalter eingebunden.</p>
  
![Konsole](https://user-images.githubusercontent.com/88386049/152693507-d0212bdd-05d9-4c0a-996b-2f391cd2ec8c.JPG)
<p>In der Konsole sind alle gefetchten Dokumente und Dateien, zusätzlich zu der geloggten Geolocation.</p>
  
![Konsole1](https://user-images.githubusercontent.com/88386049/152693552-4c7df6da-45f2-4edf-8c85-0a2dde785083.JPG)
  <p>Dies ist die ausgeklappte Geolocation-Information. Aspekte sind z.B.
    

    ``latitude: 53.6756
      longitude: 10.2405``
  angegeben.
  </p>

  ![maps](https://user-images.githubusercontent.com/88386049/152693793-626f59fc-d9bd-48e5-8e2f-1a5c8e18a9a4.JPG)
  <p>Die ausgegebenen Koordinaten sind wie man der Karte entnehmen kann nicht sehr genau, weil wir uns nicht ansatzweise in der Nähe der angegebenen Koordinaten befinden. Die Genauigkeit der Geolocation müssen wir im nächsten Schritt noch verbessern.</p>
  
</details>

<p id="Stunde12"><b>Dienstag 08.02.2022</b></p>

  Wir haben heute den Fehler in unserem Code gefunden, weshalb die Gesamtbeschleunigung als 5 ausgegeben wird. Wir haben fälschlicherweise dies im Code stehen gehabt:
  ```javascript
  var aGesamt = ((acl.x + acl.y + acl.z) - 9,5);
  ```
  Im Code werden aber keine Zahlen mit Komma akzeptiert und aus ``9,5`` wird ``5``. Behoben haben wir diesen Fehler, indem wir ``9.5`` eingesetzt haben. Anschließend hat unsere Berechnung funktioniert und wurde auf der Website angezeigt. In Absprache mit Ihnen haben sie uns zu der Formel ``Wurzel aus der Beschleunigung der Achsen zum Quadrat`` geraten. Dies ergibt den Betrag bzw. die Länge des Beschleunigungsvektors. In Javascript ausgedrückt ergibt dies:
  ```javascript
  var aGesamt = Math.sqrt(Math.pow(acl.x, 2) + Math.pow(acl.y, 2) + Math.pow((acl.z - 9.5), 2));
  ```
  Mit ```Math.sqrt()``` wird die Wurzel aus einem Wert gezogen und mit ```Math.pow(acl.x, 2)``` wird der Wert der Beschleunigung in X-Achsenrichtung ``acl.x`` hoch der Potenz ``2`` genommen.
Zusätzlich haben wir heute versucht, das Problem mit der Geolocation API zu beheben. Dazu haben wir die Elemente des Datensatzes, der durch die Geolocation API zurückgegeben wird, einer ``Alert()`` Funktion übergeben. Die Elemente Längen- und Breitengrade, und deren Genauigkeit werden inklusive der Höhe in einem Pop-Up-Feld angezeigt.
Außerdem haben wir uns darum gekümmert, dass unsere App weitere Funktionen erhält. Hierzu war unsere Idee den Timer den wir bisher hatten durch einen Timer für Intervalltraining zu ersetzen. Hier soll sich ein Timer für das Training mit einem Timer für Pausen abwechseln. Wie lang die jeweiligen Abschnitte sein sollen, kann der Anwender vorher selber auswählen. Am Ende der Doppelstunde funktionierte der Timer allerdings noch nicht so wie geplant und gab verschiedene Fehlermeldungen (z. B. Function is not defined).

<details><summary>Screenshots vom 08.02.2022</summary>
  
![Screenshot_20220209-145835_Samsung Internet](https://user-images.githubusercontent.com/88386049/153597454-faadf218-d5e9-4c3f-ad2e-728518f4362a.jpg)

![Screenshot_20220209-135414_Samsung Internet](https://user-images.githubusercontent.com/88386049/153597471-21addd6d-8641-4f35-a5c0-a7f422e05c46.jpg)
<p>Beide Abbildungen zeigen das Alert-Feld, mit dem die Inhalte der Geolocation API ausgegeben werden.</p>

</details>
  
<p id="Stunde13"><b>Mittwoch 09.02.2022</b><br></p>

  Heute haben wir uns erneut mit der Formel zur Berechnung der Beschleunigung beschäftigt. Die Formel der letzten Stunde hat uns leider noch nicht zum Erfolg geführt, weshalb wir die Formel noch einmal abgeändert haben. Dabei mussten wir die Erdbeschleunigung vom totalen Beschleunigungsvektor abziehen. Unsere neue Formel lautet daher:  
```javascript
var aGesamt =  (Math.sqrt(Math.pow(acl.x, 2) + Math.pow(acl.y, 2) + Math.pow((acl.z), 2)) - 9.5);
```
Nach kurzer Überlegeung haben wir uns aber für eine andere Formel entschieden, da ansonsten noch keinen korrekten Betrag gebildet haben. Wir haben die Formel daher noch einmal umgeformt und haben diese Formel abschließend hochgeladen:
```javascript
var aGesamt = Math.sqrt(Math.pow(  Math.sqrt(Math.pow(acl.x, 2) + Math.pow(acl.y, 2) + Math.pow(acl.z, 2)) - 9.5 , 2));
```
Mit der Korrekten Formel funktioniert unser Schrittzähler auch schon bereits, zwar nicht besonders zuverlässig, aber er funktioniert. Ein Schritt wird nur gezählt, wenn die gemessene Bescheunigung größer als 1 und kleiner als 2 ist. Die Werte haben wir experimentell mit einer Schrittreihe ermittelt. Das bedeutet, dass ein Schritt immer am Punkt der größten Beschleunigung gezählt wird. Das bedeutet aber leider auch, dass der Schrittzähler nicht sehr genau arbeitet, da es bereits genügt, das Smartphone mit der richtigen Beschleunigung (also zwischen 1 und 2) anzuheben, um einen weiteren Schritt in die Statistik aufzunehmen. Dennoch funktioniert der Schrittzähler und wir werden uns einem anderen Modul der APP widmen. Falls wir später noch Zeit haben, können wir den Schrittzähler nocheinmal überarbeiten.
Außerdem haben wir den Timer für das Intervalltraining weiter verbessert. Allerdings gibt es immernoch verschiedene Feheler, vor allem die Timer richtig nacheinander auszuführen. So läuft der zweite Timer schon während der erste läuft und es muss im richtigen Moment der andere eingeblendet werden. Ein Problem war hier auch die verschiedenen Funktionformen von Javascript mit synchronem und asynchronem Code. Aus diesem Grund mussten wir auch eine erste Lösung wieder verwerfen, die wir mit zwei while-schleifen programmiert haben, da in dieser Schleife erst Werte zurückgegeben werden, wenn die Schleife fertig durchgelaufen ist. Am Ende der Stunde wurde aber schon immerhin Start und Ende richtig angezeigt.

<p id="Stunde14"><b>Dienstag 15.02.2022</b><br></p>

Zwischen der letzten und der heutigen Stunde haben wir uns auch zuhause weiter mit unserem Projekt beschäftigt. So ist der Timer nun soweit, dass er richtig nacheinander durchläuft und dies auch solange, bis man ihn stoppt. Hierfür haben wir zwei Möglichkeiten eingebaut. Es gibt einen "Anhalten" Button mit dem der Timer stoppt, man ihn aber wieder starten kann. Außerdem gibt es einen "Beenden" Button der den Timer auch beendet und einen zur Startseite weiterleitet. In der heutigen Stunde haben wir weiter am generellen Styling des Timers programmiert und die Buttons die normalerweise nebeneinander angezeigt werden, so bearbeitet, dass sie auf schmalen Geräten übereinander angezeigt werden, da sie sonst auf diesen Geräten über den Bildschirmrand hinausragen würden. Außerdem haben wir eine Funktion eingefügt, die die Anzahl der Runden zählt und anzeigt, die der Benutzer bereits trainiert hat. Hierbei zählt eine Runde, wenn beide Timer einmal durchgelaufen sind. Parallel arbeiten wir auch noch an einer Möglichkeit die Trainingsfortschritte zu speichern. Außerdem haben wir heute die Geolocation-API, die bisher experimentell mit einem Alert dem Benutzer gezeigt wurde (siehe <a href="#Stunde12">08.02.2022</a>) fest auf der Benutzeroberfläche eingebaut.

<p id="Stunde15"><b>Mittwoch 16.02.2022</b><br></p>

Heute haben wir weitere Verbesserungen an der App vorgenommen. So haben wir heute an der Geolocation API weitergearbeitet. Es gibt hier zwei Methoden, um Daten abzufragen. Die ``navigator.geolocation.watchPosition(showPosition, showError, options);`` Methode (watchPosition()) fragt die Position und weitere enthaltene Bausteine nur einmal ab. Dies bietet sich zwar für eine reine Standortabfrage an, ist aber bei einer Geschwindigkeitsanzeige nicht zielführend. Daher haben wir uns für die ``navigator.geolocation.watchPosition(showPosition, showError, options);`` Methode (watchPosition()) entschieden, die immer dann einen Wert zurückgibt, wenn sich einer der gemessenen Parameter verändert. Dies hat auch gut funktioniert, obwohl die Anzeige der Geschwindigkeit bei geringer Geschwindigkeit auch auf Grund des ungenauen GPS recht ungenau ist. Deshalb haben wir die Genauigkeit der Erfassung auf die höchst mögliche Genauigkeit gestellt(``` var options = {enableHighAccuracy: true} ```). Zudem haben wir die Ausgabe der Geschwindigkeit der Geolocation API in m/s mit 3,6 multipliziert, damit wir km/h erhalten und ausgeben können. Außerdem haben wir ein neues Feature angefangen mit dem wir eine Übersicht über verschiedene Trainingsfortschritte und Infos auf der Startseite einblenden wollen. Allerdings hat die Internetfreigabe nicht funktioniert, weswegen wir in unserer Arbeit etwas eingeschränkt waren. Trotzdem konnten wir die Stunde gut nutzen, müssen aber die Änderungen, die wir z. B. am Code der Sensoren vorgenommen haben, in der nächsten Stunde testen, da wir hierfür eine Internetverbindung brauchen, um die Dateien auf den Server hochzuladen.

<details><summary>Screenshots vom 16.02.2022</summary>

![Screenshot_20220215-151732_Samsung Internet](https://user-images.githubusercontent.com/88386049/154447352-b1594a25-36e1-4aa1-a488-dacaaef0ad89.jpg)
  <p>Hier wird die Geolocation-API noch über ein Alert() Feld in m/s ausgegeben.</p>

![Screenshot_20220215-160149_Samsung Internet](https://user-images.githubusercontent.com/88386049/154447199-ac102693-2681-43b4-b6e2-a11aea989dbc.jpg)
  <p>Nun ist die Geschwindigkeitsanzeige im GUI integriert und als km/h ausgegeben.</p>
  
</details>

<p id="Stunde16"><b>Dienstag 22.02.2022</b><br></p>

In dieser Stunde haben wir weiter an unserem Projekt gearbeitet. Zum Teil haben wir die Übersicht auf der Startseite weiterentwickelt. Allerdings geht es hier hauptsächlich um das Design und wir haben uns dazu entschieden, die Designs der verschiedenen Funktionen mit einem Grafikprogramm zu gestalten und danach erst im Code umzusetzen. Dementsprechend haben wir diese Funktion erstmal beiseite gelegt und uns überlegt was wir noch für Funktionen in unserer App haben wollen. Hier haben wir uns überlegt, dass besonders wenn man Sport macht, es sehr wichtig ist genug zu trinken. Deswegen haben wir uns dazu entschieden eine Art Erinnerung zu implementieren, die einen erinnert zu trinken und wo man eintragen wie viel man schon getrunken hat, um das für das eigenen Körpergewicht berechnete Ziel zu erreichen. Mit der Vorgabe eines Ziels fällt es einem oft leichter diese Ziele zu erreichen, besonders wenn man seinen eigenen Fortschritt sehen kann.

<details><summary>Screenshots 22.02.2022</summary>
  
![Screenshot_UI_Startbildschirm](https://user-images.githubusercontent.com/88386049/155575603-63f13033-a8a6-43be-9027-0801b6f651a3.JPG)
  
</details>

<p id="Stunde17"><b>Mittwoch 23.02.2022</b><br>
  Wir haben heute mit dem Design der App begonnen. Das Endergebniss der Stunde ist unter den Screenshots zu sehen. Dabei versuchen wir ein Design mit möglichs vielen runden Rechtecken zu erschaffen, da wir dies äußerlich sehr ansprechend finden. Außerdem haben wir uns heute weiter damit beschäftigt, eine Hintergrundsnychronisierung zu implementieren. Dabei mussten wir aber auch heute wieder viel recherchieren, da dies kein leichtes Unterfangen ist. Bisher haben wir zwar ein Synchronisations-Event starten können, dies aber nur durch das Dev-Tool. Ziel des Vorhabens ist aber, dass die APP auch im Hintergrund funktioniert, wenn das Handy im Stand-By-Modus ist. Momentan klappt das aber noch nicht.</p>
  
  
<details><summary>Screenshots 23.02.2022</summary>
  
![App-Design](https://user-images.githubusercontent.com/88386049/155553347-b4007cdf-fc64-48cc-99c0-2adc5fac6395.jpg)
![Affinity-Design](https://user-images.githubusercontent.com/88386049/155553361-5a3ae93b-19aa-43d4-a48a-140f3df7bee0.jpg)

  
</details>

<p id="Stunde18"><b>Samstag 26.02.2022</b><br>
  Am Wochenende haben wir mit dem Design der PWA weiter gemacht. Wir haben dabei die Übersichts/Home Seite designt, die verschiedene Übersichten über das sportliche Programm zeigen soll. In der nächsten Stunde werden wir gemeinsam absprechen, ob der Designvorschlag passend ist oder noch einmal überarbeitet werden muss. Dies könnten wir uns eventuell bei den Farben vorstellen, die jederzeit wieder geändert werden können.</p>
  
<h2 id="kapitel3">3. Materialien</h2>
<h2 id="kapitel4">4. Quellen</h2>

<li>https://developers.google.com/web/fundamentals/primers/service-workers</li>
<li>https://developers.google.com/web/fundamentals/codelabs/push-notifications</li>
<li>https://developers.google.com/web/ilt/pwa/introduction-to-push-notifications</li>
<li>https://w3c.github.io/sensors/#sensor-onreading</li>
<li>https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet</li>
<li>https://w3c.github.io/geolocation-api/#dom-geolocationcoordinates-speed</li>
<li>https://web.dev/add-manifest/#icons</li>
<li>https://www.w3.org/TR/geolocation/</li>
<li>https://wicg.github.io/background-fetch/#background-fetch-event</li>
<li>https://www.heise.de/developer/artikel/Hintergrund-Synchronisation-fuer-PWAs-Teil-2-Background-Fetch-API-4681556.html</li>
<li>https://docs.microsoft.com/de-de/microsoft-edge/progressive-web-apps-chromium/how-to/background-syncs</li>
<li>https://www.heise.de/developer/artikel/Hintergrund-Synchronisation-fuer-PWAs-Teil-1-Background-Sync-API-4676538.html#:~:text=Die%20Background%20Sync%20API%20m%C3%B6chte%20Progressive%20Web%20Apps,Nachricht%20verfassen%2C%20absenden%20und%20das%20Smartphone%20wieder%20wegpacken.</li>
<li>https://developers.google.com/web/updates/2015/12/background-sync#progressive_enhancement</li>
<li>https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/</li>
